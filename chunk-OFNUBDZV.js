import{a as N,b as u,c as D,d as U,e as H,f as F,g as B,l as k,m as L}from"./chunk-H23B6YYR.js";import{b as A,c as R}from"./chunk-XXIQFCOC.js";import{a as G}from"./chunk-NCTN2JFS.js";import{$ as x,F as _,L as e,P as C,U as f,Y as d,Z as n,_ as r,ba as E,ca as b,da as w,ea as h,fa as o,ga as m,ha as g,ja as p,ka as l,la as S,pa as I,ra as T,wa as O,xa as y,y as v}from"./chunk-UABBN7TV.js";function q(t,a){if(t&1&&(n(0,"div",33)(1,"span",34),o(2,"\u2713"),r(),n(3,"span"),o(4),p(5,"translate"),r()()),t&2){let s=b();e(4),m(l(5,1,s.successMessage()))}}function V(t,a){if(t&1&&(n(0,"div",35)(1,"span",36),o(2,"\u26A0\uFE0F"),r(),n(3,"span"),o(4),p(5,"translate"),r()()),t&2){let s=b();e(4),m(l(5,1,s.errorMessage()))}}function Y(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.DISPLAY_NAME_REQUIRED")," "))}function W(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.DISPLAY_NAME_MIN_LENGTH")," "))}function j(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.EMAIL_REQUIRED")," "))}function Q(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.EMAIL_INVALID")," "))}function J(t,a){t&1&&(n(0,"span"),o(1,"\u{1F441}\uFE0F"),r())}function K(t,a){t&1&&(n(0,"span"),o(1,"\u{1F648}"),r())}function X(t,a){if(t&1&&(n(0,"div",38)(1,"div",39),x(2,"div",40),r(),n(3,"span",41),o(4),p(5,"translate"),r()()),t&2){let s=b();e(2),w("width",s.passwordStrength().strength,"%")("background-color",s.passwordStrength().color),e(),w("color",s.passwordStrength().color),e(),g(" ",l(5,7,s.passwordStrength().label)," ")}}function Z(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.PASSWORD_REQUIRED")," "))}function $(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.PASSWORD_MIN_LENGTH")," "))}function ee(t,a){t&1&&(n(0,"span"),o(1,"\u{1F441}\uFE0F"),r())}function te(t,a){t&1&&(n(0,"span"),o(1,"\u{1F648}"),r())}function ie(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.CONFIRM_PASSWORD_REQUIRED")," "))}function ne(t,a){t&1&&(n(0,"div",37),o(1),p(2,"translate"),r()),t&2&&(e(),g(" ",l(2,1,"AUTH.PASSWORDS_MUST_MATCH")," "))}function re(t,a){t&1&&(n(0,"span"),o(1),p(2,"translate"),r()),t&2&&(e(),m(l(2,1,"AUTH.CREATE_ACCOUNT")))}function ae(t,a){t&1&&(n(0,"span",42),x(1,"span",43),o(2),p(3,"translate"),r()),t&2&&(e(2),g(" ",l(3,1,"COMMON.LOADING")," "))}var z=class t{fb=v(k);router=v(O);supabase=v(G);registerForm;isLoading=_(!1);errorMessage=_("");successMessage=_("");showPassword=_(!1);showConfirmPassword=_(!1);passwordValue=_("");constructor(){this.registerForm=this.fb.group({displayName:["",[u.required,u.minLength(2)]],email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]}),this.registerForm.get("password")?.valueChanges.subscribe(a=>{this.passwordValue.set(a||"")})}passwordStrength=S(()=>{let a=this.passwordValue();if(a.length===0)return{label:"",strength:0,color:""};let s=0,i="",c="";return a.length>=6&&(s+=25),a.length>=10&&(s+=25),/[a-z]/.test(a)&&(s+=15),/[A-Z]/.test(a)&&(s+=15),/\d/.test(a)&&(s+=10),/[!@#$%^&*(),.?":{}|<>]/.test(a)&&(s+=10),s<40?(i="AUTH.WEAK",c="#ef4444"):s<75?(i="AUTH.MEDIUM",c="#f59e0b"):(i="AUTH.STRONG",c="#10b981"),{label:i,strength:s,color:c}});passwordsMatch(){let a=this.registerForm.get("password")?.value,s=this.registerForm.get("confirmPassword")?.value;return a===s}async onSubmit(){if(this.errorMessage.set(""),this.successMessage.set(""),this.registerForm.invalid){this.registerForm.markAllAsTouched();return}if(!this.passwordsMatch()){this.errorMessage.set("AUTH.PASSWORDS_MUST_MATCH");return}this.isLoading.set(!0);try{let{email:a,password:s}=this.registerForm.value;await this.supabase.signUp(a,s),this.successMessage.set("AUTH.REGISTRATION_SUCCESS"),setTimeout(()=>{sessionStorage.setItem("displayName",this.registerForm.value.displayName),this.router.navigate(["/profile/setup"])},2e3)}catch(a){console.error("Registration error:",a),a.message?.includes("already registered")?this.errorMessage.set("AUTH.EMAIL_ALREADY_EXISTS"):this.errorMessage.set(a.message||"AUTH.REGISTRATION_ERROR")}finally{this.isLoading.set(!1)}}togglePassword(){this.showPassword.set(!this.showPassword())}toggleConfirmPassword(){this.showConfirmPassword.set(!this.showConfirmPassword())}hasError(a,s){let i=this.registerForm.get(a);return i?i.hasError(s)&&(i.dirty||i.touched):!1}static \u0275fac=function(s){return new(s||t)};static \u0275cmp=C({type:t,selectors:[["app-register"]],decls:93,vars:74,consts:[[1,"register-container"],[1,"register-form-section"],[1,"register-header"],[1,"logo"],[1,"title"],[1,"subtitle"],[1,"register-form",3,"ngSubmit","formGroup"],["class","success-alert",4,"ngIf"],["class","error-alert",4,"ngIf"],[1,"form-group"],["for","displayName"],["id","displayName","type","text","formControlName","displayName","placeholder","John Doe",1,"form-input"],["class","error-message",4,"ngIf"],["for","email"],["id","email","type","email","formControlName","email","placeholder","name@example.com",1,"form-input"],["for","password"],[1,"password-wrapper"],["id","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input",3,"type"],["type","button",1,"password-toggle",3,"click"],[4,"ngIf"],["class","password-strength",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-input",3,"type"],[1,"terms-text"],["type","submit",1,"submit-button",3,"disabled"],["class","loading",4,"ngIf"],[1,"login-link"],["routerLink","/auth/login"],[1,"branding-section"],[1,"branding-content"],[1,"features"],[1,"feature"],[1,"icon"],[1,"success-alert"],[1,"success-icon"],[1,"error-alert"],[1,"error-icon"],[1,"error-message"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-fill"],[1,"strength-label"],[1,"loading"],[1,"spinner"]],template:function(s,i){if(s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),o(4),p(5,"translate"),r(),n(6,"h2",4),o(7),p(8,"translate"),r(),n(9,"p",5),o(10),p(11,"translate"),r()(),n(12,"form",6),E("ngSubmit",function(){return i.onSubmit()}),f(13,q,6,3,"div",7)(14,V,6,3,"div",8),n(15,"div",9)(16,"label",10),o(17),p(18,"translate"),r(),x(19,"input",11),f(20,Y,3,3,"div",12)(21,W,3,3,"div",12),r(),n(22,"div",9)(23,"label",13),o(24),p(25,"translate"),r(),x(26,"input",14),f(27,j,3,3,"div",12)(28,Q,3,3,"div",12),r(),n(29,"div",9)(30,"label",15),o(31),p(32,"translate"),r(),n(33,"div",16),x(34,"input",17),n(35,"button",18),E("click",function(){return i.togglePassword()}),f(36,J,2,0,"span",19)(37,K,2,0,"span",19),r()(),f(38,X,6,9,"div",20)(39,Z,3,3,"div",12)(40,$,3,3,"div",12),r(),n(41,"div",9)(42,"label",21),o(43),p(44,"translate"),r(),n(45,"div",16),x(46,"input",22),n(47,"button",18),E("click",function(){return i.toggleConfirmPassword()}),f(48,ee,2,0,"span",19)(49,te,2,0,"span",19),r()(),f(50,ie,3,3,"div",12)(51,ne,3,3,"div",12),r(),n(52,"div",23)(53,"p"),o(54),p(55,"translate"),r()(),n(56,"button",24),f(57,re,3,3,"span",19)(58,ae,4,3,"span",25),r(),n(59,"div",26)(60,"p"),o(61),p(62,"translate"),n(63,"a",27),o(64),p(65,"translate"),r()()()()(),n(66,"div",28)(67,"div",29)(68,"h2"),o(69),p(70,"translate"),r(),n(71,"p"),o(72),p(73,"translate"),r(),n(74,"div",30)(75,"div",31)(76,"span",32),o(77,"\u2713"),r(),n(78,"span"),o(79),p(80,"translate"),r()(),n(81,"div",31)(82,"span",32),o(83,"\u2713"),r(),n(84,"span"),o(85),p(86,"translate"),r()(),n(87,"div",31)(88,"span",32),o(89,"\u2713"),r(),n(90,"span"),o(91),p(92,"translate"),r()()()()()()),s&2){let c,M,P;e(4),g("\u{1F3B5} ",l(5,44,"APP_NAME")),e(3),m(l(8,46,"AUTH.CREATE_ACCOUNT")),e(3),m(l(11,48,"AUTH.REGISTER_SUBTITLE")),e(2),d("formGroup",i.registerForm),e(),d("ngIf",i.successMessage()),e(),d("ngIf",i.errorMessage()),e(3),m(l(18,50,"AUTH.DISPLAY_NAME")),e(2),h("error",i.hasError("displayName","required")||i.hasError("displayName","minlength")),e(),d("ngIf",i.hasError("displayName","required")),e(),d("ngIf",i.hasError("displayName","minlength")&&!i.hasError("displayName","required")),e(3),m(l(25,52,"AUTH.EMAIL")),e(2),h("error",i.hasError("email","required")||i.hasError("email","email")),e(),d("ngIf",i.hasError("email","required")),e(),d("ngIf",i.hasError("email","email")&&!i.hasError("email","required")),e(3),m(l(32,54,"AUTH.PASSWORD")),e(3),h("error",i.hasError("password","required")||i.hasError("password","minlength")),d("type",i.showPassword()?"text":"password"),e(2),d("ngIf",!i.showPassword()),e(),d("ngIf",i.showPassword()),e(),d("ngIf",(c=i.registerForm.get("password"))==null?null:c.value),e(),d("ngIf",i.hasError("password","required")),e(),d("ngIf",i.hasError("password","minlength")&&!i.hasError("password","required")),e(3),m(l(44,56,"AUTH.CONFIRM_PASSWORD")),e(3),h("error",i.hasError("confirmPassword","required")||!i.passwordsMatch()&&((M=i.registerForm.get("confirmPassword"))==null?null:M.touched)),d("type",i.showConfirmPassword()?"text":"password"),e(2),d("ngIf",!i.showConfirmPassword()),e(),d("ngIf",i.showConfirmPassword()),e(),d("ngIf",i.hasError("confirmPassword","required")),e(),d("ngIf",!i.passwordsMatch()&&((P=i.registerForm.get("confirmPassword"))==null?null:P.touched)&&!i.hasError("confirmPassword","required")),e(3),m(l(55,58,"AUTH.TERMS_AGREEMENT")),e(2),d("disabled",i.isLoading()),e(),d("ngIf",!i.isLoading()),e(),d("ngIf",i.isLoading()),e(3),g(" ",l(62,60,"AUTH.ALREADY_HAVE_ACCOUNT")," "),e(3),m(l(65,62,"AUTH.LOGIN")),e(5),m(l(70,64,"AUTH.BRANDING_TITLE_REGISTER")),e(3),m(l(73,66,"AUTH.BRANDING_DESCRIPTION_REGISTER")),e(7),m(l(80,68,"AUTH.REGISTER_FEATURE_1")),e(6),m(l(86,70,"AUTH.REGISTER_FEATURE_2")),e(6),m(l(92,72,"AUTH.REGISTER_FEATURE_3"))}},dependencies:[T,I,L,H,N,D,U,B,F,R,y,A],styles:['@charset "UTF-8";.register-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.register-form-section[_ngcontent-%COMP%]{flex:1;max-width:500px;background:#fff;padding:40px;display:flex;flex-direction:column;overflow-y:auto}@media(max-width:768px){.register-form-section[_ngcontent-%COMP%]{max-width:100%;padding:24px}}.register-header[_ngcontent-%COMP%]{margin-bottom:32px}.logo[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#6366f1;margin-bottom:24px}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#111827;margin-bottom:8px}.subtitle[_ngcontent-%COMP%]{font-size:16px;color:#6b7280}.register-form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.success-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f0fdf4;border:1px solid #86efac;border-radius:8px;color:#16a34a;font-size:14px;margin-bottom:24px;animation:_ngcontent-%COMP%_slideDown .3s ease}.success-icon[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.error-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;color:#dc2626;font-size:14px;margin-bottom:24px;animation:_ngcontent-%COMP%_slideDown .3s ease}.error-icon[_ngcontent-%COMP%]{font-size:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:6px}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;font-size:16px;border:1px solid #d1d5db;border-radius:8px;transition:all .2s}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-input.error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.password-wrapper[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:20px;padding:4px;opacity:.6;transition:opacity .2s}.password-toggle[_ngcontent-%COMP%]:hover{opacity:1}.password-strength[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;gap:12px}.strength-bar[_ngcontent-%COMP%]{flex:1;height:6px;background:#e5e7eb;border-radius:3px;overflow:hidden}.strength-fill[_ngcontent-%COMP%]{height:100%;transition:all .3s ease;border-radius:3px}.strength-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;min-width:60px}.error-message[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;color:#ef4444;animation:_ngcontent-%COMP%_slideDown .2s ease}.terms-text[_ngcontent-%COMP%]{margin-bottom:24px}.terms-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;line-height:1.5}.submit-button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:16px;font-weight:600;color:#fff;background:#6366f1;border:none;border-radius:8px;cursor:pointer;transition:all .2s;margin-bottom:24px}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#4f46e5;transform:translateY(-1px);box-shadow:0 4px 12px #6366f14d}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.login-link[_ngcontent-%COMP%]{text-align:center}.login-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:14px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6366f1;font-weight:600;text-decoration:none;margin-left:4px}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.branding-section[_ngcontent-%COMP%]{flex:1;background:linear-gradient(135deg,#667eea,#764ba2);display:none;align-items:center;justify-content:center;padding:60px;color:#fff}@media(min-width:768px){.branding-section[_ngcontent-%COMP%]{display:flex}}.branding-content[_ngcontent-%COMP%]{max-width:500px}.branding-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin-bottom:16px;line-height:1.2}.branding-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:40px;opacity:.9;line-height:1.6}.features[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.feature[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:16px}.feature[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:767px){.register-container[_ngcontent-%COMP%]{background:#fff}.logo[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{font-size:24px}}']})};export{z as Register};
